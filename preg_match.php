<?php
require('common.php');
/*
*   收集各种各样的正则表达式   
*
*/

/*
*   校验邮件地址
*/
function preg_email($email)
{
    $preg_str = '/^[a-zA-Z0-9]+([-_.][a-zA-Z0-9]+)*@([a-zA-Z0-9]+[-.])+([a-z]{2,5})$/';
    if(preg_match($preg_str,$email)){
        return true;
    }else{
        return false;
    }
}

/*
*   校验身份证
*/
function preg_id($id)
{
    $preg_str = '/^\d{15}$)|(^\d{17}([0-9]|X)$/';
    if(preg_match($preg_str,$id)){
        return true;
    }else{
        return false;
    }
}

/*
*   校验银行卡号码
*/
function preg_bn($bank_num)
{
    $preg_str = '/^(\d{15}|\d{16}|\d{19})$/';
    if(preg_match($preg_str,$bank_num)){
        return true;
    }else{
        return false;
    }
}

/*
*   校验手机号码
*/
function preg_tel($tel)
{
    if (!$tel) {
        return false;
    }
    $ip = get_client_ip();
    $countryMsg = curlPost("http://ip.taobao.com/service/getIpInfo.php?ip=".$ip,[]);
    $countryMsgs = json_decode($countryMsg,true);
    $NaN = fopen("InternationNaN.txt","r");
    $Num = '+86';
    while (!feof($NaN)) {
        $NaNs = explode("|", fgets($NaN));
        if ($NaNs[2] == $countryMsgs['data']['county_id']) {
            // var_dump($NaNs[3]);
            $Num = $NaNs[3];
            fclose($NaN);
            break;
        }
    }
    $preg_str = '/(\+|00)(297|93|244|1264|358|355|376|971|54|374|1684|1268|61|43|994|257|32|229|226|880|359|973|1242|387|590|375|501|1441|591|55|1246|673|975|267|236|1|61|41|56|86|225|237|243|242|682|57|269|238|506|53|5999|61|1345|357|420|49|253|1767|45|1809|1829|1849|213|593|20|291|212|34|372|251|358|679|500|33|298|691|241|44|995|44|233|350|224|590|220|245|240|30|1473|299|502|594|1671|592|852|504|385|509|36|62|44|91|246|353|98|964|354|972|39|1876|44|962|81|76|77|254|996|855|686|1869|82|383|965|856|961|231|218|1758|423|94|266|370|352|371|853|590|212|377|373|261|960|52|692|389|223|356|95|382|976|1670|258|222|1664|596|230|265|60|262|264|687|227|672|234|505|683|31|47|977|674|64|968|92|507|64|51|63|680|675|48|1787|1939|850|351|595|970|689|974|262|40|7|250|966|249|221|65|500|4779|677|232|503|378|252|508|381|211|239|597|421|386|46|268|1721|248|963|1649|235|228|66|992|690|993|670|676|1868|216|90|688|886|255|256|380|598|1|998|3906698|379|1784|58|1284|1340|84|678|681|685|967|27|260|263)(9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)\d{4,20}$/';
    if(preg_match($preg_str,$Num.$tel)){
        return true;
    }else{
        return false;
    }
}

/*
*   中国大陆地区手机正则
*/
function preg_tel_cn($tel)
{
    //'/^(((\\+\\d{2}-)?0\\d{2,3}-\\d{7,8})|((\\+\\d{2}-)?(\\d{2,3}-)?([1][3,4,5,7,8][0-9]\\d{8})))$/';
    //'/^(\\+\\d{2}-)?(\\d{2,3}-)?([1][3,4,5,7,8][0-9]\\d{8})$/';
    //'/^011(9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)\d{0,14}$/';
    $preg_str = '/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\\d{8}$/';
    if(preg_match($preg_str,$tel)){
        return true;
    }else{
        return false;
    }
}

/*
*   6~16位密码
*/
function preg_password($password)
{
    $preg_str='/^[\w-\.]{6,16}$/';
    if(preg_match($preg_str,$password)){
        return true;
    }else{
        return false;
    }
}